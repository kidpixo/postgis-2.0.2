<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>ST_SimplifyPreserveTopology</title><link rel="stylesheet" href="style.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="PostGIS 2.0.2SVN Manual"><link rel="up" href="reference.html#Geometry_Processing" title="8.9. Geometry Processing"><link rel="prev" href="ST_Simplify.html" title="ST_Simplify"><link rel="next" href="ST_Split.html" title="ST_Split"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">ST_SimplifyPreserveTopology</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ST_Simplify.html">Prev</a> </td><th width="60%" align="center">8.9. Geometry Processing</th><td width="20%" align="right"> <a accesskey="n" href="ST_Split.html">Next</a></td></tr></table><hr></div><div class="refentry" lang="en"><a name="ST_SimplifyPreserveTopology"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SimplifyPreserveTopology &#8212; Returns a "simplified" version of the given geometry using
			the Douglas-Peucker algorithm. Will avoid creating derived
			geometries (polygons in particular) that are invalid.</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_SimplifyPreserveTopology</b>(</code>geometry <var class="pdparam">geomA</var>, float <var class="pdparam">tolerance</var><code>)</code>;</p></div></div><div class="refsection" lang="en"><a name="id2951463"></a><h2>Description</h2><p>Returns a "simplified" version of the given geometry using
			the Douglas-Peucker algorithm. Will avoid creating derived
			geometries (polygons in particular) that are invalid. Will actually do something only with
				(multi)lines and (multi)polygons but you can safely call it with
				any kind of geometry. Since simplification occurs on a
				object-by-object basis you can also feed a GeometryCollection to
				this function.</p><p>Performed by the GEOS module.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Requires GEOS 3.0.0+</p></td></tr></table></div><p>Availability: 1.3.3</p></div><div class="refsection" lang="en"><a name="id2951492"></a><h2>Examples</h2><p>Same example as Simplify, but we see Preserve Topology prevents oversimplification.  The circle can at most become a square.</p><pre class="programlisting">
SELECT ST_Npoints(the_geom) As np_before, ST_NPoints(ST_SimplifyPreserveTopology(the_geom,0.1)) As np01_notbadcircle, ST_NPoints(ST_SimplifyPreserveTopology(the_geom,0.5)) As np05_notquitecircle,
ST_NPoints(ST_SimplifyPreserveTopology(the_geom,1)) As np1_octagon, ST_NPoints(ST_SimplifyPreserveTopology(the_geom,10)) As np10_square,
ST_NPoints(ST_SimplifyPreserveTopology(the_geom,100)) As  np100_stillsquare
FROM (SELECT ST_Buffer('POINT(1 3)', 10,12) As the_geom) As foo;

--result--
 np_before | np01_notbadcircle | np05_notquitecircle | np1_octagon | np10_square | np100_stillsquare
-----------+-------------------+---------------------+-------------+---------------+-------------------
		49 |                33 |                  17 |           9 |             5 |                 5
				</pre></div><div class="refsection" lang="en"><a name="id2951523"></a><h2>See Also</h2><p><a href="ST_Simplify.html" title="ST_Simplify">ST_Simplify</a></p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ST_Simplify.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="reference.html#Geometry_Processing">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ST_Split.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">ST_Simplify </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> ST_Split</td></tr></table></div></body></html>
