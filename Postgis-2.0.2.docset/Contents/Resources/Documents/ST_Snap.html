<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>ST_Snap</title><link rel="stylesheet" href="style.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="PostGIS 2.0.2SVN Manual"><link rel="up" href="reference.html#Geometry_Editors" title="8.5. Geometry Editors"><link rel="prev" href="ST_SnapToGrid.html" title="ST_SnapToGrid"><link rel="next" href="ST_Transform.html" title="ST_Transform"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">ST_Snap</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ST_SnapToGrid.html">Prev</a> </td><th width="60%" align="center">8.5. Geometry Editors</th><td width="20%" align="right"> <a accesskey="n" href="ST_Transform.html">Next</a></td></tr></table><hr></div><div class="refentry" lang="en"><a name="ST_Snap"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Snap &#8212; 
	Snap segments and vertices of input geometry
	to vertices of a reference geometry.
		</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Snap</b>(</code>geometry  <var class="pdparam">input</var>, geometry  <var class="pdparam">reference</var>, float  <var class="pdparam">tolerance</var><code>)</code>;</p></div></div><div class="refsection" lang="en"><a name="id2904987"></a><h2>Description</h2><p>
 Snaps the vertices and segments of a geometry
 another Geometry's vertices.
 A snap distance tolerance is used to control where snapping is performed.
		</p><p>
 Snapping one geometry to another can improve
 robustness for overlay operations by eliminating
 nearly-coincident edges
 (which cause problems during noding and intersection calculation).
		</p><p>
 Too much snapping can result in invalid topology
 being created, so the number and location of snapped vertices
 is decided using heuristics to determine when it
 is safe to snap.
 This can result in some potential snaps being omitted, however.
		</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
		  The returned geometry might loose its simplicity (see
		  <a href="ST_IsSimple.html" title="ST_IsSimple">ST_IsSimple</a>) and validity (see 
		  <a href="ST_IsValid.html" title="ST_IsValid">ST_IsValid</a>).
		  </p></td></tr></table></div><p>Availability: 2.0.0 requires GEOS &gt;= 3.3.0.</p></div><div class="refsection" lang="en"><a name="id2905037"></a><h2>Examples</h2><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td colspan="2" align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_snap01.png"><div class="caption"><p>A multipolygon shown with a linestring (before any snapping)</p></div></div></div>
					   </td></tr><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_snap02.png"><div class="caption"><p>A multipolygon snapped to linestring to tolerance: 1.01 of distance. 
							  The new multipolygon is shown with reference linestring</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_AsText(ST_Snap(poly,line, ST_Distance(poly,line)*1.01)) AS polysnapped
FROM (SELECT 
   ST_GeomFromText('MULTIPOLYGON(
     ((26 125, 26 200, 126 200, 126 125, 26 125 ),
      ( 51 150, 101 150, 76 175, 51 150 )), 
      (( 151 100, 151 200, 176 175, 151 100 )))') As poly,
       ST_GeomFromText('LINESTRING (5 107, 54 84, 101 100)') As line
		
	) As foo;

                             polysnapped
---------------------------------------------------------------------
 MULTIPOLYGON(((26 125,26 200,126 200,126 125,101 100,26 125),
 (51 150,101 150,76 175,51 150)),((151 100,151 200,176 175,151 100)))
				</pre>
					</td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_snap04.png"><div class="caption"><p>A multipolygon snapped to linestring to tolerance: 1.25 of distance. 
							  The new multipolygon is shown with reference linestring</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_AsText(
    ST_Snap(poly,line, ST_Distance(poly,line)*1.25)
  ) AS polysnapped
FROM (SELECT 
  ST_GeomFromText('MULTIPOLYGON(
    (( 26 125, 26 200, 126 200, 126 125, 26 125 ),
      ( 51 150, 101 150, 76 175, 51 150 )),
      (( 151 100, 151 200, 176 175, 151 100 )))') As poly,
       ST_GeomFromText('LINESTRING (5 107, 54 84, 101 100)') As line
		
	) As foo;

                             polysnapped
---------------------------------------------------------------------
MULTIPOLYGON(((5 107,26 200,126 200,126 125,101 100,54 84,5 107),
(51 150,101 150,76 175,51 150)),((151 100,151 200,176 175,151 100)))
				</pre>
						</td></tr><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_snap03.png"><div class="caption"><p>The linestring snapped to the original multipolygon  at tolerance 1.01 of distance. 
							  The new linestring is shown with reference multipolygon</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_AsText(
   ST_Snap(line, poly, ST_Distance(poly,line)*1.01)
  ) AS linesnapped
FROM (SELECT 
  ST_GeomFromText('MULTIPOLYGON(
     ((26 125, 26 200, 126 200, 126 125, 26 125),
      (51 150, 101 150, 76 175, 51 150 )), 
      ((151 100, 151 200, 176 175, 151 100)))') As poly,
       ST_GeomFromText('LINESTRING (5 107, 54 84, 101 100)') As line
	) As foo;

              linesnapped
----------------------------------------
 LINESTRING(5 107,26 125,54 84,101 100)
				</pre><p>
						  </p>
					</td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_snap05.png"><div class="caption"><p>The linestring snapped to the original multipolygon  at tolerance 1.25 of distance. 
							  The new linestring is shown with reference multipolygon</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_AsText(
 ST_Snap(line, poly, ST_Distance(poly,line)*1.25)
  ) AS linesnapped
FROM (SELECT 
  ST_GeomFromText('MULTIPOLYGON(
     (( 26 125, 26 200, 126 200, 126 125, 26 125 ),
      (51 150, 101 150, 76 175, 51 150 )), 
      ((151 100, 151 200, 176 175, 151 100 )))') As poly,
       ST_GeomFromText('LINESTRING (5 107, 54 84, 101 100)') As line	
	) As foo;
              linesnapped
---------------------------------------
LINESTRING(26 125,54 84,101 100)
				</pre>
					</td></tr></tbody></table></div></div><div class="refsection" lang="en"><a name="id2905284"></a><h2>See Also</h2><p>
		<a href="ST_SnapToGrid.html" title="ST_SnapToGrid">ST_SnapToGrid</a>
		</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ST_SnapToGrid.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="reference.html#Geometry_Editors">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ST_Transform.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">ST_SnapToGrid </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> ST_Transform</td></tr></table></div></body></html>
