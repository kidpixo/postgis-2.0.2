<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>AddEdge</title><link rel="stylesheet" href="style.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="PostGIS 2.0.2SVN Manual"><link rel="up" href="Topology.html#Topology_Processing" title="11.7. Topology Processing"><link rel="prev" href="AddNode.html" title="AddNode"><link rel="next" href="AddFace.html" title="AddFace"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">AddEdge</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="AddNode.html">Prev</a> </td><th width="60%" align="center">11.7. Topology Processing</th><td width="20%" align="right"> <a accesskey="n" href="AddFace.html">Next</a></td></tr></table><hr></div><div class="refentry" lang="en"><a name="AddEdge"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>AddEdge &#8212; Adds a linestring edge to the edge table and associated start and end points to the point nodes table of the specified topology schema using the specified linestring geometry and returns the edgeid of the new (or existing) edge.</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">AddEdge</b>(</code>varchar  <var class="pdparam">toponame</var>, geometry  <var class="pdparam">aline</var><code>)</code>;</p></div></div><div class="refsection" lang="en"><a name="id3079921"></a><h2>Description</h2><p>Adds an edge to the edge table and associated nodes to the nodes table of the specified <code class="varname">toponame</code> schema using the specified linestring geometry and returns the edgeid of the new or existing record. 
                The newly added edge has "universe" face on both sides and links to itself.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If the <code class="varname">aline</code> geometry crosses, overlaps, contains or is contained by an existing linestring edge, then an error is thrown and the edge is not added.</p></td></tr></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The geometry of <code class="varname">aline</code> must have the same <code class="varname">srid</code> as defined for the topology otherwise an invalid spatial reference sys error will be thrown.</p></td></tr></table></div><p>Availability: 2.0.0 requires GEOS &gt;= 3.3.0.</p></div><div class="refsection" lang="en"><a name="id3079971"></a><h2>Examples</h2><pre class="programlisting">SELECT topology.AddEdge('ma_topo', ST_GeomFromText('LINESTRING(227575.8 893917.2,227591.9 893900.4)', 26986) ) As edgeid;
-- result-
edgeid
--------
 1
				
SELECT topology.AddEdge('ma_topo', ST_GeomFromText('LINESTRING(227591.9 893900.4,227622.6 893844.2,227641.6 893816.5,
 227704.5 893778.5)', 26986) ) As edgeid;
-- result --
edgeid
--------
 2
 
 SELECT topology.AddEdge('ma_topo', ST_GeomFromText('LINESTRING(227591.2 893900, 227591.9 893900.4,
  227704.5 893778.5)', 26986) ) As edgeid;
 -- gives error --
 ERROR:  Edge intersects (not on endpoints) with existing edge 1
</pre></div><div class="refsection" lang="en"><a name="id3079996"></a><h2>See Also</h2><p><a href="CreateTopology.html" title="CreateTopology">CreateTopology</a>, <a href="using_postgis_dbmanagement.html#spatial_ref_sys" title="4.3.1. The SPATIAL_REF_SYS Table and Spatial Reference Systems">Section 4.3.1, &#8220;The SPATIAL_REF_SYS Table and Spatial Reference Systems&#8221;</a></p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="AddNode.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="Topology.html#Topology_Processing">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="AddFace.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">AddNode </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> AddFace</td></tr></table></div></body></html>
