<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Chapter 9. Raster Reference</title><link rel="stylesheet" href="style.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="PostGIS 2.0.2SVN Manual"><link rel="up" href="index.html" title="PostGIS 2.0.2SVN Manual"><link rel="prev" href="PostGIS_HasBBox.html" title="PostGIS_HasBBox"><link rel="next" href="geomval.html" title="geomval"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 9. Raster Reference</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="PostGIS_HasBBox.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="geomval.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="RT_reference"></a>Chapter 9. Raster Reference</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="RT_reference.html#Raster_Types">9.1. Raster Support Data types</a></span></dt><dt><span class="sect1"><a href="RT_reference.html#Raster_Management_Functions">9.2. Raster Management</a></span></dt><dt><span class="sect1"><a href="RT_reference.html#Raster_Constructors">9.3. Raster Constructors</a></span></dt><dt><span class="sect1"><a href="RT_reference.html#Raster_Accessors">9.4. Raster Accessors</a></span></dt><dt><span class="sect1"><a href="RT_reference.html#RasterBand_Accessors">9.5. Raster Band Accessors</a></span></dt><dt><span class="sect1"><a href="RT_reference.html#Raster_Pixel_Accessors">9.6. Raster Pixel Accessors and Setters</a></span></dt><dt><span class="sect1"><a href="RT_reference.html#Raster_Editors">9.7. Raster Editors</a></span></dt><dt><span class="sect1"><a href="RT_reference.html#RasterBand_Editors">9.8. Raster Band Editors</a></span></dt><dt><span class="sect1"><a href="RT_reference.html#RasterBand_Stats">9.9. Raster Band Statistics and Analytics</a></span></dt><dt><span class="sect1"><a href="RT_reference.html#Raster_Outputs">9.10. Raster Outputs</a></span></dt><dt><span class="sect1"><a href="RT_reference.html#Raster_Processing">9.11. Raster Processing</a></span></dt><dt><span class="sect1"><a href="RT_reference.html#Raster_Processing_Builtin_Functions">9.12. Raster Processing Builtin Functions</a></span></dt><dt><span class="sect1"><a href="RT_reference.html#RT_Operators">9.13. Raster Operators</a></span></dt><dt><span class="sect1"><a href="RT_reference.html#Raster_Relationships">9.14. Raster and Raster Band Spatial Relationships</a></span></dt></dl></div><p>The functions given below are the ones which a user of PostGIS Raster is
  likely to need and which are currently available in PostGIS Raster. There are other functions which are required support
  functions to the raster objects which are not of use to a general
  user.</p><p><code class="varname">raster</code> is a new PostGIS type for storing and analyzing raster data. </p><p>For loading rasters from raster files please refer to <a href="using_raster.xml.html#RT_Loading_Rasters" title="5.1. Loading and Creating Rasters">Section 5.1, &#8220;Loading and Creating Rasters&#8221;</a></p><p>For the examples in this reference we will be using a raster table of dummy rasters - Formed with the following code </p><pre class="programlisting">CREATE TABLE dummy_rast(rid integer, rast raster);
INSERT INTO dummy_rast(rid, rast)
VALUES (1,
('01' -- little endian (uint8 ndr)
|| 
'0000' -- version (uint16 0)
||
'0000' -- nBands (uint16 0)
||
'0000000000000040' -- scaleX (float64 2)
||
'0000000000000840' -- scaleY (float64 3)
||
'000000000000E03F' -- ipX (float64 0.5)
||
'000000000000E03F' -- ipY (float64 0.5)
||
'0000000000000000' -- skewX (float64 0)
||
'0000000000000000' -- skewY (float64 0)
||
'00000000' -- SRID (int32 0)
||
'0A00' -- width (uint16 10)
||
'1400' -- height (uint16 20)
)::raster
),
-- Raster: 5 x 5 pixels, 3 bands, PT_8BUI pixel type, NODATA = 0
(2,  ('01000003009A9999999999A93F9A9999999999A9BF000000E02B274A' ||
'41000000007719564100000000000000000000000000000000FFFFFFFF050005000400FDFEFDFEFEFDFEFEFDF9FAFEF' ||
'EFCF9FBFDFEFEFDFCFAFEFEFE04004E627AADD16076B4F9FE6370A9F5FE59637AB0E54F58617087040046566487A1506CA2E3FA5A6CAFFBFE4D566DA4CB3E454C5665')::raster);</pre><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Raster_Types"></a>9.1. Raster Support Data types</h2></div><div><div class="abstract"><p class="title"><b>Abstract</b></p><p>This section lists the PostgreSQL data types specifically created to support raster functionality.</p></div></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="geomval.html">geomval</a></span><span class="refpurpose"> - A spatial datatype with two fields - geom (holding a geometry object) 
                    and val (holding a double precision pixel value from a raster band).</span></dt><dt><span class="refentrytitle"><a href="histogram.html">histogram</a></span><span class="refpurpose"> - A composite type used as record output of the ST_Histogram and ST_ApproxHistogram functions.</span></dt><dt><span class="refentrytitle"><a href="raster.html">raster</a></span><span class="refpurpose"> - raster spatial data type.</span></dt><dt><span class="refentrytitle"><a href="reclassarg.html">reclassarg</a></span><span class="refpurpose"> - A composite type used as input into the ST_Reclass function defining the behavior of reclassification.</span></dt><dt><span class="refentrytitle"><a href="summarystats.html">summarystats</a></span><span class="refpurpose"> - A composite type used as output of the ST_SummaryStats function.</span></dt></dl></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Raster_Management_Functions"></a>9.2. Raster Management</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="RT_AddRasterConstraints.html">AddRasterConstraints</a></span><span class="refpurpose"> - Adds raster constraints to a loaded raster table for a specific column that constrains spatial ref, scaling, blocksize, alignment, bands, band type and a flag to denote if raster column is regularly blocked. The table must be loaded with data for the constraints to be inferred. Returns true of the constraint setting was accomplished and if issues a notice.</span></dt><dt><span class="refentrytitle"><a href="RT_DropRasterConstraints.html">DropRasterConstraints</a></span><span class="refpurpose"> - Drops PostGIS raster constraints that refer to a raster table column. Useful if you need to reload data or update your raster column data.</span></dt><dt><span class="refentrytitle"><a href="RT_PostGIS_Raster_Lib_Build_Date.html">PostGIS_Raster_Lib_Build_Date</a></span><span class="refpurpose"> - Reports full raster library build date.</span></dt><dt><span class="refentrytitle"><a href="RT_PostGIS_Raster_Lib_Version.html">PostGIS_Raster_Lib_Version</a></span><span class="refpurpose"> - Reports full raster version and build configuration
		infos.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_GDALDrivers.html">ST_GDALDrivers</a></span><span class="refpurpose"> - Returns a list of raster formats supported by your lib gdal.  These are the formats you can output your raster using ST_AsGDALRaster.</span></dt></dl></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Raster_Constructors"></a>9.3. Raster Constructors</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="RT_ST_AddBand.html">ST_AddBand</a></span><span class="refpurpose"> - Returns a raster with the new band(s) of given type added with given initial value in the given index location. If no index is specified, the band is added to the end.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_AsRaster.html">ST_AsRaster</a></span><span class="refpurpose"> - Converts a PostGIS geometry to a PostGIS raster.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_Band.html">ST_Band</a></span><span class="refpurpose"> - Returns one or more bands of an existing raster as a new raster.  Useful for building new rasters from existing rasters.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_MakeEmptyRaster.html">ST_MakeEmptyRaster</a></span><span class="refpurpose"> - Returns an empty raster (having no bands) of given dimensions (width &amp; height), upperleft X and Y, pixel size and rotation (scalex, scaley, skewx &amp; skewy) and reference system (srid).  
				If a raster is passed in, returns a new raster with the same size, alignment and SRID.  If srid is left out, the spatial ref is set to unknown (0).</span></dt></dl></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Raster_Accessors"></a>9.4. Raster Accessors</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="RT_ST_GeoReference.html">ST_GeoReference</a></span><span class="refpurpose"> - Returns the georeference meta data in GDAL or ESRI format as commonly seen in a world file. Default is GDAL.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_Height.html">ST_Height</a></span><span class="refpurpose"> - Returns the height of the raster in pixels.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_MetaData.html">ST_MetaData</a></span><span class="refpurpose"> - Returns basic meta data about a raster object such as pixel size, rotation (skew), upper, lower left, etc.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_NumBands.html">ST_NumBands</a></span><span class="refpurpose"> - Returns the number of bands in the raster object.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_PixelHeight.html">ST_PixelHeight</a></span><span class="refpurpose"> - Returns the pixel height in geometric units of the spatial reference system.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_PixelWidth.html">ST_PixelWidth</a></span><span class="refpurpose"> - Returns the pixel width in geometric units of the spatial reference system.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_ScaleX.html">ST_ScaleX</a></span><span class="refpurpose"> - Returns the X component of the pixel width in units of coordinate reference system.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_ScaleY.html">ST_ScaleY</a></span><span class="refpurpose"> - Returns the Y component of the pixel height in units of coordinate reference system.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_Raster2WorldCoordX.html">ST_Raster2WorldCoordX</a></span><span class="refpurpose"> - Returns the geometric X coordinate upper left of a raster, column and row. Numbering of columns
					and rows starts at 1.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_Raster2WorldCoordY.html">ST_Raster2WorldCoordY</a></span><span class="refpurpose"> - Returns the geometric Y coordinate upper left corner of a raster, column and row. Numbering of columns
					and rows starts at 1. </span></dt><dt><span class="refentrytitle"><a href="RT_ST_Rotation.html">ST_Rotation</a></span><span class="refpurpose"> - Returns the rotation of the raster in radian.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_SkewX.html">ST_SkewX</a></span><span class="refpurpose"> - Returns the georeference X skew (or rotation parameter).</span></dt><dt><span class="refentrytitle"><a href="RT_ST_SkewY.html">ST_SkewY</a></span><span class="refpurpose"> - Returns the georeference Y skew (or rotation parameter).</span></dt><dt><span class="refentrytitle"><a href="RT_ST_SRID.html">ST_SRID</a></span><span class="refpurpose"> - Returns the spatial reference identifier of the raster as defined in spatial_ref_sys table.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_UpperLeftX.html">ST_UpperLeftX</a></span><span class="refpurpose"> - Returns the upper left X coordinate of raster in projected spatial ref.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_UpperLeftY.html">ST_UpperLeftY</a></span><span class="refpurpose"> - Returns the upper left Y coordinate of raster in projected spatial ref.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_Width.html">ST_Width</a></span><span class="refpurpose"> - Returns the width of the raster in pixels.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_World2RasterCoordX.html">ST_World2RasterCoordX</a></span><span class="refpurpose"> - Returns the column in the raster of the point geometry (pt) or a X and Y world coordinate (xw, yw) represented
				in world spatial reference system of raster.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_World2RasterCoordY.html">ST_World2RasterCoordY</a></span><span class="refpurpose"> - Returns the row in the raster of the point geometry (pt) or a X and Y world coordinate (xw, yw) represented
				in world spatial reference system of raster.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_IsEmpty.html">ST_IsEmpty</a></span><span class="refpurpose"> - Returns true if the raster is empty (width = 0 and height = 0). Otherwise, returns false.</span></dt></dl></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="RasterBand_Accessors"></a>9.5. Raster Band Accessors</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="RT_ST_BandMetaData.html">ST_BandMetaData</a></span><span class="refpurpose"> - Returns basic meta data for a specific raster band. band num 1 is assumed if none-specified.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_BandNoDataValue.html">ST_BandNoDataValue</a></span><span class="refpurpose"> - Returns the value in a given band that represents no data. If no band num 1 is assumed.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_BandIsNoData.html">ST_BandIsNoData</a></span><span class="refpurpose"> - Returns true if the band is filled with only nodata values.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_BandPath.html">ST_BandPath</a></span><span class="refpurpose"> - Returns system file path to a band stored in file system. If no bandnum specified, 1 is assumed.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_BandPixelType.html">ST_BandPixelType</a></span><span class="refpurpose"> - Returns the type of pixel for given band. If no bandnum specified, 1 is assumed.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_HasNoBand.html">ST_HasNoBand</a></span><span class="refpurpose"> - Returns true if there is no band with given band number.  If no band number is specified, then band number 1 is assumed.</span></dt></dl></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Raster_Pixel_Accessors"></a>9.6. Raster Pixel Accessors and Setters</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="RT_ST_PixelAsPolygon.html">ST_PixelAsPolygon</a></span><span class="refpurpose"> - Returns the geometry that bounds the pixel for a particular row and column.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_PixelAsPolygons.html">ST_PixelAsPolygons</a></span><span class="refpurpose"> - Returns the geometry that bounds every pixel of a raster band along with the value, the X and the Y raster coordinates of each pixel.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_Value.html">ST_Value</a></span><span class="refpurpose"> - Returns the value of a given band in a given columnx, rowy pixel or at a particular geometric point. Band numbers start at 1 and assumed to be 1 if not specified. If exclude_nodata_value is set to false, then all pixels include nodata pixels are considered to intersect and return value. If exclude_nodata_value is not passed in then reads it from metadata of raster.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_SetValue.html">ST_SetValue</a></span><span class="refpurpose"> - Returns modified raster resulting from setting the value of a given band in a given columnx, rowy pixel or at a pixel that intersects a particular geometric point. Band numbers start at 1 and assumed to be 1 if not specified.</span></dt></dl></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Raster_Editors"></a>9.7. Raster Editors</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="RT_ST_SetGeoReference.html">ST_SetGeoReference</a></span><span class="refpurpose"> - Set Georeference 6 georeference parameters  in a single call. Numbers should be separated by white space.  Accepts inputs in GDAL or ESRI format.  Default is GDAL.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_SetRotation.html">ST_SetRotation</a></span><span class="refpurpose"> - Set the rotation of the raster in radian.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_SetScale.html">ST_SetScale</a></span><span class="refpurpose"> - Sets the X and Y size of pixels in units of coordinate reference system. Number units/pixel width/height.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_SetSkew.html">ST_SetSkew</a></span><span class="refpurpose"> - Sets the georeference X and Y skew (or rotation parameter).  If only one is passed in, sets X and Y to the same value.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_SetSRID.html">ST_SetSRID</a></span><span class="refpurpose"> - Sets the SRID of a raster to a particular integer srid defined in the spatial_ref_sys table.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_SetUpperLeft.html">ST_SetUpperLeft</a></span><span class="refpurpose"> - Sets the value of the upper left corner of the pixel to projected X and Y coordinates.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_Resample.html">ST_Resample</a></span><span class="refpurpose"> - Resample a raster using a specified resampling algorithm, new dimensions, an arbitrary grid corner and a set of raster georeferencing attributes defined or borrowed from another raster. New pixel values are computed using the NearestNeighbor (english or american spelling), Bilinear, Cubic, CubicSpline or Lanczos resampling algorithm. Default is NearestNeighbor.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_Rescale.html">ST_Rescale</a></span><span class="refpurpose"> - Resample a raster by adjusting only its scale (or pixel size). New pixel values are computed using the NearestNeighbor (english or american spelling), Bilinear, Cubic, CubicSpline or Lanczos resampling algorithm. Default is NearestNeighbor.
				    </span></dt><dt><span class="refentrytitle"><a href="RT_ST_Reskew.html">ST_Reskew</a></span><span class="refpurpose"> - Resample a raster by adjusting only its skew (or rotation parameters). New pixel values are computed using the NearestNeighbor (english or american spelling), Bilinear, Cubic, CubicSpline or Lanczos resampling algorithm. Default is NearestNeighbor.
				    </span></dt><dt><span class="refentrytitle"><a href="RT_ST_SnapToGrid.html">ST_SnapToGrid</a></span><span class="refpurpose"> - Resample a raster by snapping it to a grid. New pixel values are computed using the NearestNeighbor (english or american spelling), Bilinear, Cubic, CubicSpline or Lanczos resampling algorithm. Default is NearestNeighbor.
				    </span></dt><dt><span class="refentrytitle"><a href="RT_ST_Transform.html">ST_Transform</a></span><span class="refpurpose"> - Reprojects a raster in a known spatial reference system to another known spatial reference system using specified resampling algorithm. Options are NearestNeighbor, Bilinear, Cubic, CubicSpline, Lanczos defaulting to NearestNeighbor.</span></dt></dl></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="RasterBand_Editors"></a>9.8. Raster Band Editors</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="RT_ST_SetBandNoDataValue.html">ST_SetBandNoDataValue</a></span><span class="refpurpose"> - Sets the value for the given band that represents no data. Band 1 is assumed if no band is specified.  To mark a band as having no nodata value, set the nodata value = NULL.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_SetBandIsNoData.html">ST_SetBandIsNoData</a></span><span class="refpurpose"> - Sets the isnodata flag of the band to TRUE. You may
                want to call this function if ST_BandIsNoData(rast, band) !=
                ST_BandIsNodata(rast, band, TRUE). This is, if the isnodata flag
                is dirty. Band 1 is assumed if no band is specified.
                </span></dt></dl></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="RasterBand_Stats"></a>9.9. Raster Band Statistics and Analytics</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="RT_ST_Count.html">ST_Count</a></span><span class="refpurpose"> - Returns the number of pixels in a given band of a raster or raster coverage.  If no band is specified defaults to band 1.  If exclude_nodata_value is set to true, will only count pixels that are not equal to the nodata value.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_Histogram.html">ST_Histogram</a></span><span class="refpurpose"> - Returns a set of histogram summarizing a raster or raster coverage data distribution separate bin ranges. Number of bins are autocomputed if not specified.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_Quantile.html">ST_Quantile</a></span><span class="refpurpose"> - Compute quantiles for a raster or raster table coverage in the context of the sample or population. Thus, a value could be examined to be at the raster's 25%, 50%, 75% percentile.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_SummaryStats.html">ST_SummaryStats</a></span><span class="refpurpose"> - Returns summary stats consisting of count,sum,mean,stddev,min,max for a given raster band of a raster or raster coverage. Band 1 is assumed is no band is specified.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_ValueCount.html">ST_ValueCount</a></span><span class="refpurpose"> - Returns a set of records containing a pixel band value  and count of the number of pixels in a given band of a raster (or a raster coverage) that have a given set of values.  If no band is specified defaults to band 1.  By default nodata value pixels are not counted. 
				    and all other values in the pixel are output and pixel band values are rounded to the nearest integer.</span></dt></dl></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Raster_Outputs"></a>9.10. Raster Outputs</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="RT_ST_AsBinary.html">ST_AsBinary</a></span><span class="refpurpose"> - Return the Well-Known Binary (WKB) representation of the raster without SRID meta data.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_AsGDALRaster.html">ST_AsGDALRaster</a></span><span class="refpurpose"> - Return the raster tile in the designated GDAL Raster format.  Raster formats are one of those supported by your compiled library. Use ST_GDALRasters() to get a list of formats supported by your library.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_AsJPEG.html">ST_AsJPEG</a></span><span class="refpurpose"> - Return the raster tile selected bands as a single Joint Photographic Exports Group (JPEG) image (byte array).  If no band is specified and 1 or more than 3 bands, then only the first band is used.  If only 3 bands then all 3 bands are used and mapped to RGB.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_AsPNG.html">ST_AsPNG</a></span><span class="refpurpose"> - Return the raster tile selected bands as a single portable network graphics (PNG) image (byte array).  If 1, 3, or 4 bands in raster and no bands are specified, then all bands are used.  If more 2 or more than 4 bands and no bands specified, then only band 1 is used.  Bands are mapped to RGB or RGBA space.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_AsTIFF.html">ST_AsTIFF</a></span><span class="refpurpose"> - Return the raster selected bands as a single TIFF image (byte array).  If no band is specified, then will try to use all bands.</span></dt></dl></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Raster_Processing"></a>9.11. Raster Processing</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="RT_Box3D.html">Box3D</a></span><span class="refpurpose"> - Returns the box 3d representation of the enclosing box of the raster.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_Clip.html">ST_Clip</a></span><span class="refpurpose"> - Returns the raster clipped by the input geometry.  If no band is specified all bands are returned. If crop is not specified, true is assumed meaning
				the output raster is cropped.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_ConvexHull.html">ST_ConvexHull</a></span><span class="refpurpose"> - Return the convex hull geometry of the raster including pixel values equal to BandNoDataValue. 
				For regular shaped and non-skewed
				rasters, this gives the same result as ST_Envelope so only useful for irregularly shaped or skewed rasters.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_DumpAsPolygons.html">ST_DumpAsPolygons</a></span><span class="refpurpose"> - Returns a set of geomval (geom,val) rows, from a given raster band.  If no band number is specified, band num defaults to 1.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_Envelope.html">ST_Envelope</a></span><span class="refpurpose"> - Returns the polygon representation of the extent of the raster.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_HillShade.html">ST_HillShade</a></span><span class="refpurpose"> - Returns the hypothetical illumination of an elevation raster band using provided azimuth, altitude, brightness and elevation scale inputs.  Useful for visualizing terrain.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_Aspect.html">ST_Aspect</a></span><span class="refpurpose"> - Returns the surface aspect of an elevation raster band.  Useful for analyzing terrain.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_Slope.html">ST_Slope</a></span><span class="refpurpose"> - Returns the surface slope of an elevation raster band.  Useful for analyzing terrain.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_Intersection.html">ST_Intersection</a></span><span class="refpurpose"> - Returns a raster or a set of geometry-pixelvalue pairs representing the shared portion of two rasters or the geometrical intersection of a vectorization of the raster and a geometry.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_MapAlgebraExpr.html">ST_MapAlgebraExpr</a></span><span class="refpurpose"> - 1 raster band version: Creates a new one band raster formed by applying a valid PostgreSQL algebraic operation on the input raster band and of pixeltype provided.  Band 1 is assumed if no band is specified.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_MapAlgebraExpr2.html">ST_MapAlgebraExpr</a></span><span class="refpurpose"> - 2 raster band version: Creates a new one band raster formed by applying a valid PostgreSQL algebraic operation on the two input raster bands and of pixeltype provided.  band 1 of each raster is assumed if no band numbers are specified. The resulting raster will be aligned (scale, skew and pixel corners) on the grid defined by the first raster and have its extent defined by the "extenttype" parameter. Values for "extenttype" can be: INTERSECTION, UNION, FIRST, SECOND.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_MapAlgebraFct.html">ST_MapAlgebraFct</a></span><span class="refpurpose"> - 1 band version - Creates a new one band raster formed by applying a valid PostgreSQL function on the input raster band and of pixeltype prodived. Band 1 is assumed if no band is specified.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_MapAlgebraFct2.html">ST_MapAlgebraFct</a></span><span class="refpurpose"> - 2 band version - Creates a new one band raster formed by applying a valid PostgreSQL function on the 2 input raster bands and of pixeltype prodived. Band 1 is assumed if no band is specified. Extent type defaults to INTERSECTION if not specified.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_MapAlgebraFctNgb.html">ST_MapAlgebraFctNgb</a></span><span class="refpurpose"> - 1-band version: Map Algebra Nearest Neighbor using user-defined PostgreSQL function. Return a raster which values are the result of a PLPGSQL user function involving a neighborhood of values from the input raster band.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_Polygon.html">ST_Polygon</a></span><span class="refpurpose"> - Returns a polygon geometry formed by the union of pixels that have a pixel value that is not no data value.  If no band number is specified, band num defaults to 1.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_Reclass.html">ST_Reclass</a></span><span class="refpurpose"> - Creates a new raster composed of band types reclassified from original.  The nband is the band to be changed.  If nband is not specified assumed to be 1.  All other bands are returned unchanged. 
				    Use case: convert a 16BUI band to a 8BUI and so forth for simpler rendering as viewable formats.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_Union.html">ST_Union</a></span><span class="refpurpose"> - Returns the union of a set of raster tiles into a single raster composed of 1 band.  If no band is specified for unioning, band num 1 is assumed.  The resulting raster's extent is the extent of the whole set.  In the case of intersection, the resulting value is defined by p_expression which is one of the following: LAST - the default when none is specified, MEAN, SUM, FIRST, MAX, MIN.</span></dt></dl></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Raster_Processing_Builtin_Functions"></a>9.12. Raster Processing Builtin Functions</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="RT_ST_Min4ma.html">ST_Min4ma</a></span><span class="refpurpose"> - Raster processing function that calculates the minimum pixel value in a neighborhood.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_Max4ma.html">ST_Max4ma</a></span><span class="refpurpose"> - Raster processing function that calculates the maximum pixel value in a neighborhood.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_Sum4ma.html">ST_Sum4ma</a></span><span class="refpurpose"> - Raster processing function that calculates the sum of all pixel values in a neighborhood.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_Mean4ma.html">ST_Mean4ma</a></span><span class="refpurpose"> - Raster processing function that calculates the mean pixel value in a neighborhood.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_Range4ma.html">ST_Range4ma</a></span><span class="refpurpose"> - Raster processing function that calculates the range of pixel values in a neighborhood.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_Distinct4ma.html">ST_Distinct4ma</a></span><span class="refpurpose"> - Raster processing function that calculates the number of unique pixel values in a neighborhood.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_StdDev4ma.html">ST_StdDev4ma</a></span><span class="refpurpose"> - Raster processing function that calculates the standard deviation of pixel values in a neighborhood.</span></dt></dl></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="RT_Operators"></a>9.13. Raster Operators</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="RT_Raster_Overlap.html">&amp;&amp;</a></span><span class="refpurpose"> - Returns TRUE if A's bounding box overlaps B's.</span></dt><dt><span class="refentrytitle"><a href="RT_Raster_OverLeft.html">&amp;&lt;</a></span><span class="refpurpose"> - Returns TRUE if A's bounding box is to the left of B's.</span></dt><dt><span class="refentrytitle"><a href="RT_Raster_OverRight.html">&amp;&gt;</a></span><span class="refpurpose"> - Returns TRUE if A's bounding box is to the right of B's.</span></dt></dl></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Raster_Relationships"></a>9.14. Raster and Raster Band Spatial Relationships</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="RT_ST_Intersects.html">ST_Intersects</a></span><span class="refpurpose"> - Return true if the raster spatially intersects a separate raster or geometry. If the band number is not provided (or set to NULL), only the convex hull of the raster is considered in the test. If the band number is provided, only those pixels with value (not NODATA) are considered in the test.</span></dt><dt><span class="refentrytitle"><a href="RT_ST_SameAlignment.html">ST_SameAlignment</a></span><span class="refpurpose"> - Returns true if rasters have same skew, scale, spatial ref and false if they don't with notice detailing issue.</span></dt></dl></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="PostGIS_HasBBox.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="geomval.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">PostGIS_HasBBox </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> geomval</td></tr></table></div></body></html>
